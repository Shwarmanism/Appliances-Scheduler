<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volt Vortex - Optimization</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/dashboard.css">
    <link rel="stylesheet" href="../static/appliances.css">
    <link rel="stylesheet" href="../static/optimization.css">
</head>
<body>
    <input type="checkbox" id="sidebar-toggle" hidden>
    <div class="dashboard-container">
        <aside class="sidebar glass">
            <div class="sidebar-top">
                <label for="sidebar-toggle" class="sidebar-hamburger-btn" aria-label="Toggle sidebar">
                    <svg class="hamburger-icon" viewBox="0 0 32 32" width="32" height="32" aria-hidden="true">
                        <rect y="7" width="32" height="3" rx="1.5" fill="#ffdf00" />
                        <rect y="14.5" width="32" height="3" rx="1.5" fill="#ffdf00" />
                        <rect y="22" width="32" height="3" rx="1.5" fill="#ffdf00" />
                    </svg>
                </label>
                <div class="sidebar-logo-block">
                    <div class="sidebar-logo new-logo">⚡</div>
                    <div class="sidebar-title">VOLT VORTEX</div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="/dashboard" class="nav-link">
                    <span class="icon"><img src="../static/Home.svg" alt="Dashboard" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="/appliances" class="nav-link">
                    <span class="icon"><img src="../static/Appliances.svg" alt="Appliances" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Appliances</span>
                </a>
                <a href="/optimization" class="nav-link active" aria-current="page">
                    <span class="icon"><img src="../static/Analytics.svg" alt="Optimization" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Optimization</span>
                </a>
                <a href="/scheduling" class="nav-link">
                    <span class="icon"><img src="../static/Report.svg" alt="Scheduling" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Scheduling</span>
                </a>
                <a href="/analytics" class="nav-link">
                    <span class="icon"><img src="../static/Analytics.svg" alt="Analytics" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Analytics</span>
                </a>
                <a href="/settings" class="nav-link">
                    <span class="icon"><img src="../static/Profile.svg" alt="Settings" class="sidebar-icon-svg"></span>
                    <span class="nav-text">Settings</span>
                </a>
            </nav>
        </aside>
        <main class="appliances-main optimization-main">
            <div class="appliances-title">Optimization</div>
            <div class="optimization-desc">
                <b>Find the best way to use your appliances while saving energy!</b><br>
                Set your daily energy usage limit below. We'll suggest the smartest mix of appliances to help you stay within your goal, while still enjoying comfort and convenience. The higher the importance, the more likely an appliance is included in your plan.
            </div>
            <div class="optimization-cards-row">
                <div class="glass optimization-cap-card">
                    <form>
                        <label for="energy-cap" style="font-weight:600; font-size:1.1rem;">Energy Usage Cap:</label>
                        <input type="number" id="energy-cap" name="energy-cap" min="1" max="24" step="0.1" value="0" style="width:90px; font-size:1.1rem; padding:6px 10px; border-radius:8px; border:1.5px solid #e0e0e0; background:#fff; color:#222; font-weight:600;">
                        <span style="font-size:1.1rem; color:#888;">kWh/day</span>
                        <button type="button" id="setCapBtn" class="add-appliance-btn">Set</button>
                    </form>
                </div>
                <div class="glass optimization-savings-card">
                    <div class="optimization-savings-bar"></div>
                    <div class="optimization-savings-content">
                        <div class="summary-title" style="font-size:1.15rem; color:#111;">Total Savings</div>
                        <div class="summary-value" style="font-size:2rem; color:#00b86b;">₱220</div>
                    </div>
                </div>
            </div>
            <div id="optNotif" style="display:none; margin:0 auto 18px auto; max-width:480px; text-align:center; z-index:10;"></div>
            <div style="display:flex; justify-content:center; margin-bottom:18px;">
                <button id="optimizeBtn" class="add-appliance-btn" style="font-size:1.1rem; padding:10px 32px; border-radius:10px; border:2px solid #ccc; color:#aaa; background:#f3f3f3; font-weight:700; cursor:not-allowed; transition:background 0.2s, color 0.2s, border 0.2s, opacity 0.2s; opacity:0.7;" disabled>Optimize</button>
            </div>
            <div id="optimizationCardsSection" class="glass optimization-cards-section">
                <div style="font-weight:800; font-size:1.35rem; margin-bottom:28px; color:#f25622; text-align:center; letter-spacing:1px;">Your Optimized Appliance Plan</div>
                <div id="optimizationLoading" style="display:none; justify-content:center; align-items:center; min-height:120px;">
                    <div class="loader" style="margin:auto; width:48px; height:48px; border:6px solid #ffd600; border-top:6px solid #f25622; border-radius:50%; animation:spin 1s linear infinite;"></div>
                </div>
                <div id="optimizedSequenceEmpty" style="text-align:center; color:#aaa; font-size:1.1rem; min-height:80px;">No plan yet. Click <b>Optimize</b> to generate your best appliance combination!</div>
                <div id="optimizedSequence" class="optimized-sequence" style="display:none;">
                    <div class="optimized-appliance-card" style="border-left:7px solid #f25622;">
                        <div style="font-size:1.13rem; font-weight:800; color:#222; margin-bottom:4px;">Refrigerator</div>
                        <div style="color:#888; font-size:1.01rem; margin-bottom:2px;">1.2 kWh</div>
                        <div style="color:#f25622; font-weight:700; font-size:0.98rem;">Importance: High</div>
                    </div>
                    <div class="optimized-appliance-card" style="border-left:7px solid #00d26a;">
                        <div style="font-size:1.13rem; font-weight:800; color:#222; margin-bottom:4px;">Electric Fan</div>
                        <div style="color:#888; font-size:1.01rem; margin-bottom:2px;">0.5 kWh</div>
                        <div style="color:#00d26a; font-weight:700; font-size:0.98rem;">Importance: Medium</div>
                    </div>
                    <div class="optimized-appliance-card" style="border-left:7px solid #227be6;">
                        <div style="font-size:1.13rem; font-weight:800; color:#222; margin-bottom:4px;">Rice Cooker</div>
                        <div style="color:#888; font-size:1.01rem; margin-bottom:2px;">0.8 kWh</div>
                        <div style="color:#227be6; font-weight:700; font-size:0.98rem;">Importance: Medium</div>
                    </div>
                    <div class="optimized-appliance-card" style="border-left:7px solid #ffd600;">
                        <div style="font-size:1.13rem; font-weight:800; color:#222; margin-bottom:4px;">Laptop</div>
                        <div style="color:#888; font-size:1.01rem; margin-bottom:2px;">0.2 kWh</div>
                        <div style="color:#ffd600; font-weight:700; font-size:0.98rem;">Importance: Low</div>
                    </div>
                    <div class="optimized-appliance-card" style="border-left:7px solid #6e6e6e;">
                        <div style="font-size:1.13rem; font-weight:800; color:#222; margin-bottom:4px;">Wi-Fi Router</div>
                        <div style="color:#888; font-size:1.01rem; margin-bottom:2px;">0.1 kWh</div>
                        <div style="color:#6e6e6e; font-weight:700; font-size:0.98rem;">Importance: Low</div>
                    </div>
                </div>
                <div id="optimizationPlanSummary" style="margin-top:32px; text-align:center; color:#6e6e6e; font-size:1.13rem; font-weight:600; letter-spacing:0.2px; display:none;">
                    <span style="color:#f25622; font-weight:800;">Total Energy Used:</span> 2.5 kWh &nbsp; | &nbsp; <span style="color:#00d26a; font-weight:800;">Within your set limit!</span>
                </div>
            </div>
            <style>
            @keyframes spin { 100% { transform: rotate(360deg); } }
            </style>
            <script>
            var optimizeBtn = document.getElementById('optimizeBtn');
            var capInput = document.getElementById('energy-cap');
            var setCapBtn = document.getElementById('setCapBtn');
            var notif = document.getElementById('optNotif');
            function showOptNotif(msg) {
                notif.textContent = msg;
                notif.style.display = 'block';
                notif.className = 'opt-toast-show';
                setTimeout(function() {
                    notif.className = notif.className.replace('opt-toast-show', '');
                    notif.style.display = 'none';
                }, 2000);
            }
            setCapBtn.onclick = function() {
                if (capInput.value && capInput.value.trim() !== "" && parseFloat(capInput.value) > 0) {
                    optimizeBtn.disabled = false;
                    optimizeBtn.style.opacity = "1";
                    optimizeBtn.style.cursor = "pointer";
                    optimizeBtn.style.background = "#fff";
                    optimizeBtn.style.color = "#f25622";
                    optimizeBtn.style.border = "2px solid #f25622";
                } else {
                    optimizeBtn.disabled = true;
                    optimizeBtn.style.opacity = "0.7";
                    optimizeBtn.style.cursor = "not-allowed";
                    optimizeBtn.style.background = "#f3f3f3";
                    optimizeBtn.style.color = "#aaa";
                    optimizeBtn.style.border = "2px solid #ccc";
                    showOptNotif('Set the energy usage cap first.');
                }
            };
            optimizeBtn.onclick = function() {
                if (optimizeBtn.disabled) {
                    showOptNotif('Set the energy usage cap first.');
                    return;
                }
                var loading = document.getElementById('optimizationLoading');
                var empty = document.getElementById('optimizedSequenceEmpty');
                var seq = document.getElementById('optimizedSequence');
                var summary = document.getElementById('optimizationPlanSummary');
                loading.style.display = 'flex';
                empty.style.display = 'none';
                seq.style.display = 'none';
                summary.style.display = 'none';
                this.disabled = true;
                setTimeout(function() {
                    loading.style.display = 'none';
                    seq.style.display = 'flex';
                    summary.style.display = 'block';
                }, 1500);
            };
            // Initial state
            optimizeBtn.disabled = true;
            optimizeBtn.style.opacity = "0.7";
            optimizeBtn.style.cursor = "not-allowed";
            optimizeBtn.style.background = "#f3f3f3";
            optimizeBtn.style.color = "#aaa";
            optimizeBtn.style.border = "2px solid #ccc";
            </script>
        </main>
    </div>
</body>
</html> 